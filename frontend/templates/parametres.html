{% extends "base_dashboard.html" %}

{% block title %}ParamÃ¨tres{% endblock %}
{% block page_title %}ParamÃ¨tres SystÃ¨me{% endblock %}

{% block content %}
<div id="alert-container"></div>

<div class="content-block" style="background: rgba(59, 130, 246, 0.05); border-color: #3b82f6; margin-bottom: 2rem;">
    <div class="content-block-header">
        <div class="content-block-title">
            ğŸ¢ Mes Ã‰tablissements
        </div>
        <div class="content-block-actions">
            <button type="button" onclick="addEtablissement()" class="btn btn-success">
                â• Ajouter un Ã©tablissement
            </button>
        </div>
    </div>
    <p style="color: #6b7280; margin-bottom: 1.5rem;">GÃ©rez tous vos Ã©tablissements. Vous pouvez en ajouter autant que nÃ©cessaire.</p>
    
    <div id="etablissements-container"></div>
</div>

<div class="content-block" style="background: rgba(34, 197, 94, 0.05); border-color: #22c55e; margin-bottom: 2rem;">
    <div class="content-block-header">
        <div class="content-block-title">
            ğŸ  Chambres
        </div>
        <div class="content-block-actions">
            <button type="button" onclick="addChambre()" class="btn btn-success">
                â• Ajouter une chambre
            </button>
        </div>
    </div>
    <p style="color: #6b7280; margin-bottom: 1.5rem;">GÃ©rez les chambres de vos Ã©tablissements.</p>
    
    <div id="chambres-container"></div>
</div>

<div class="content-block" style="background: rgba(168, 85, 247, 0.05); border-color: #a855f7; margin-bottom: 2rem;">
    <div class="content-block-header">
        <div class="content-block-title">
            ğŸ‘¥ Personnels
        </div>
        <div class="content-block-actions">
            <button type="button" onclick="addPersonnel()" class="btn btn-success">
                â• Ajouter un personnel
            </button>
        </div>
    </div>
    <p style="color: #6b7280; margin-bottom: 1.5rem;">GÃ©rez les membres du personnel et dÃ©finissez les pages auxquelles ils ont accÃ¨s.</p>
    
    <div id="personnels-container"></div>
</div>

<div class="content-block" style="background: rgba(236, 72, 153, 0.05); border-color: #ec4899; margin-bottom: 2rem;">
    <div class="content-block-header">
        <div class="content-block-title">
            ğŸ“§ Configuration Messagerie
        </div>
        <div class="content-block-actions">
            <button type="button" onclick="addMailConfig()" class="btn btn-success">
                â• Ajouter une configuration mail
            </button>
        </div>
    </div>
    <p style="color: #6b7280; margin-bottom: 1.5rem;">Configurez vos comptes de messagerie pour l'envoi et la rÃ©ception d'emails (SMTP/POP3).</p>
    
    <div id="mail-configs-container"></div>
</div>

<div class="content-block" style="background: rgba(249, 115, 22, 0.05); border-color: #f97316;">
    <div class="content-block-header">
        <div class="content-block-title">
            ğŸ› ï¸ Gestion des donnÃ©es
        </div>
    </div>
    <p style="color: #6b7280; margin-bottom: 1.5rem;">GÃ©rez les donnÃ©es de votre systÃ¨me : chargement de donnÃ©es de dÃ©monstration ou rÃ©initialisation.</p>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem;">
        <div style="background: white; padding: 1.5rem; border-radius: 0.75rem; border: 2px solid #e5e7eb;">
            <h3 style="margin: 0 0 0.75rem 0; color: #059669;">ğŸ“¦ DonnÃ©es de dÃ©monstration</h3>
            <p style="color: #6b7280; font-size: 0.875rem; margin-bottom: 1rem;">
                Charger des Ã©tablissements, chambres, sÃ©jours et clients de dÃ©monstration pour tester l'application.
            </p>
            <button type="button" onclick="loadDemoData()" class="btn btn-success" style="width: 100%;">
                ğŸ¯ Charger les donnÃ©es de dÃ©mo
            </button>
        </div>
        
        <div style="background: white; padding: 1.5rem; border-radius: 0.75rem; border: 2px solid #e5e7eb;">
            <h3 style="margin: 0 0 0.75rem 0; color: #dc2626;">ğŸ—‘ï¸ RÃ©initialisation sÃ©lective</h3>
            <p style="color: #6b7280; font-size: 0.875rem; margin-bottom: 1rem;">
                Supprimer sÃ©lectivement certaines donnÃ©es du systÃ¨me.
            </p>
            <button type="button" onclick="showResetOptions()" class="btn btn-danger" style="width: 100%;">
                âš™ï¸ Options de rÃ©initialisation
            </button>
        </div>
        
        <div style="background: white; padding: 1.5rem; border-radius: 0.75rem; border: 2px solid #e5e7eb;">
            <h3 style="margin: 0 0 0.75rem 0; color: #dc2626;">âš ï¸ RÃ©initialisation complÃ¨te</h3>
            <p style="color: #6b7280; font-size: 0.875rem; margin-bottom: 1rem;">
                Supprimer TOUTES les donnÃ©es et remettre Ã  zÃ©ro (conserve l'utilisateur admin).
            </p>
            <button type="button" onclick="resetAllData()" class="btn btn-danger" style="width: 100%;">
                ğŸ”„ Tout rÃ©initialiser
            </button>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/parametres.js') }}"></script>
{% endblock %}
    
    let etablissements = [];
    let countriesData = [];
