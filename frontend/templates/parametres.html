{% extends "base_dashboard.html" %}

{% block title %}ParamÃ¨tres{% endblock %}
{% block page_title %}ParamÃ¨tres SystÃ¨me{% endblock %}

{% block content %}
<div id="alert-container"></div>

<div class="dotted-section section-blue" style="margin-bottom: 2rem;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
        <h2 style="margin: 0;">ğŸ¢ Mes Ã‰tablissements</h2>
        <button type="button" onclick="addEtablissement()" class="btn btn-primary">
            â• Ajouter un Ã©tablissement
        </button>
    </div>
    <p style="color: #6b7280; margin-bottom: 1.5rem;">GÃ©rez tous vos Ã©tablissements. Vous pouvez en ajouter autant que nÃ©cessaire.</p>
    
    <div id="etablissements-container"></div>
</div>

<div class="dotted-section section-green" style="margin-bottom: 2rem;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
        <h2 style="margin: 0;">ğŸ  Chambres</h2>
        <button type="button" onclick="addChambre()" class="btn btn-primary">
            â• Ajouter une chambre
        </button>
    </div>
    <p style="color: #6b7280; margin-bottom: 1.5rem;">GÃ©rez les chambres de vos Ã©tablissements.</p>
    
    <div id="chambres-container"></div>
</div>

<div class="dotted-section section-purple" style="margin-bottom: 2rem;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
        <h2 style="margin: 0;">ğŸ‘¥ Personnels</h2>
        <button type="button" onclick="addPersonnel()" class="btn btn-primary">
            â• Ajouter un personnel
        </button>
    </div>
    <p style="color: #6b7280; margin-bottom: 1.5rem;">GÃ©rez les membres du personnel et dÃ©finissez les pages auxquelles ils ont accÃ¨s.</p>
    
    <div id="personnels-container"></div>
</div>

<div class="dotted-section section-orange" style="background: rgba(249, 115, 22, 0.05); border: 3px dotted #f97316; box-shadow: 0 4px 6px rgba(249, 115, 22, 0.1);">
    <h2>ğŸ› ï¸ Gestion des donnÃ©es</h2>
    <p style="color: #6b7280; margin-bottom: 1.5rem;">GÃ©rez les donnÃ©es de votre systÃ¨me : chargement de donnÃ©es de dÃ©monstration ou rÃ©initialisation.</p>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem;">
        <div style="background: white; padding: 1.5rem; border-radius: 0.75rem; border: 2px solid #e5e7eb;">
            <h3 style="margin: 0 0 0.75rem 0; color: #059669;">ğŸ“¦ DonnÃ©es de dÃ©monstration</h3>
            <p style="color: #6b7280; font-size: 0.875rem; margin-bottom: 1rem;">
                Charger des Ã©tablissements, chambres, sÃ©jours et clients de dÃ©monstration pour tester l'application.
            </p>
            <button type="button" onclick="loadDemoData()" class="btn btn-success" style="width: 100%;">
                ğŸ¯ Charger les donnÃ©es de dÃ©mo
            </button>
        </div>
        
        <div style="background: white; padding: 1.5rem; border-radius: 0.75rem; border: 2px solid #e5e7eb;">
            <h3 style="margin: 0 0 0.75rem 0; color: #dc2626;">ğŸ—‘ï¸ RÃ©initialisation sÃ©lective</h3>
            <p style="color: #6b7280; font-size: 0.875rem; margin-bottom: 1rem;">
                Supprimer sÃ©lectivement certaines donnÃ©es du systÃ¨me.
            </p>
            <button type="button" onclick="showResetOptions()" class="btn btn-danger" style="width: 100%;">
                âš™ï¸ Options de rÃ©initialisation
            </button>
        </div>
        
        <div style="background: white; padding: 1.5rem; border-radius: 0.75rem; border: 2px solid #e5e7eb;">
            <h3 style="margin: 0 0 0.75rem 0; color: #dc2626;">âš ï¸ RÃ©initialisation complÃ¨te</h3>
            <p style="color: #6b7280; font-size: 0.875rem; margin-bottom: 1rem;">
                Supprimer TOUTES les donnÃ©es et remettre Ã  zÃ©ro (conserve l'utilisateur admin).
            </p>
            <button type="button" onclick="resetAllData()" class="btn btn-danger" style="width: 100%;">
                ğŸ”„ Tout rÃ©initialiser
            </button>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/parametres.js') }}"></script>
{% endblock %}
    
    let etablissements = [];
    let countriesData = [];
