<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Dashboard{% endblock %} - Maison d'HÃ´te</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body style="margin: 0; display: flex; height: 100vh;">
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2 style="display: flex; align-items: center; gap: 0.5rem;">
                <span style="font-size: 1.5rem;">ğŸ¡</span> Maison d'HÃ´te
            </h2>
        </div>
        
        <nav class="sidebar-nav">
            <a href="/dashboard" class="sidebar-link {% if request.path == '/dashboard' %}active{% endif %}">
                <span>ğŸ“Š</span> Tableau de bord
            </a>
            <a href="/nouvelle-reservation" class="sidebar-link {% if request.path == '/nouvelle-reservation' %}active{% endif %}">
                <span>â•</span> Nouvelle rÃ©servation
            </a>
            <a href="/reservations" class="sidebar-link {% if request.path == '/reservations' %}active{% endif %}">
                <span>ğŸ“…</span> RÃ©servations
            </a>
            <a href="/clients" class="sidebar-link {% if request.path == '/clients' %}active{% endif %}">
                <span>ğŸ‘¥</span> Base clients
            </a>
            <a href="/parametres" class="sidebar-link {% if request.path == '/parametres' %}active{% endif %}">
                <span>âš™ï¸</span> ParamÃ¨tres
            </a>
        </nav>
        
        <div class="sidebar-footer">
            <a href="/logout" class="sidebar-link logout-link">
                <span>ğŸšª</span> DÃ©connexion
            </a>
        </div>
    </aside>

    <main class="main-content">
        <div class="top-bar">
            <h1 class="page-title">{% block page_title %}Dashboard{% endblock %}</h1>
            <div class="user-info">
                <span id="userName">Administrateur</span>
            </div>
        </div>
        
        <div class="content-wrapper">
            {% block content %}{% endblock %}
        </div>
    </main>

    <script>
        async function loadUserInfo() {
            try {
                const response = await fetch('/api/current-user');
                if (response.ok) {
                    const user = await response.json();
                    document.getElementById('userName').textContent = `${user.prenom} ${user.nom}`;
                }
            } catch (error) {
                console.error('Erreur chargement utilisateur:', error);
            }
        }
        
        loadUserInfo();
    </script>

    {% block scripts %}{% endblock %}
</body>
</html>
